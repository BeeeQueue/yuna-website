{"version":3,"sources":["js/index.ts"],"names":["el","document","querySelector","innerHTML","addEventListener","lazyImages","querySelectorAll","window","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","image","target","src","dataset","srcset","onload","classList","remove","unobserve","observe"],"mappings":"aAAA,IAAMA,EAAKC,SAASC,cAAc,eAC9BF,IACFA,EAAGG,UAAY,UAGjBF,SAASG,iBAAiB,mBAAoB,WAC5C,IAAMC,EAAaJ,SAASK,iBAAiB,YAE7C,GAAI,yBAA0BC,OAAQ,CACpC,IAAMC,EAAW,IAAIC,qBAAqB,SAAAC,GACxCA,EAAQC,QAAQ,SAAAC,GACd,GAAKA,EAAMC,eAAX,CAEA,IAAMC,EAAQF,EAAMG,OACpBD,EAAME,IAAMF,EAAMG,QAAQD,IAC1BF,EAAMI,OAASJ,EAAMG,QAAQC,QAAU,GAEvCJ,EAAMK,OAAS,WACbL,EAAMM,UAAUC,OAAO,QACvBP,EAAMK,OAAS,MAEjBX,EAASc,UAAUR,QAIvBT,EAAWM,QAAQ,SAAAG,GAAK,OAAIN,EAASe,QAAQT","file":"index.js","sourcesContent":["const el = document.querySelector('.below-fold')\nif (el) {\n  el.innerHTML = 'loaded'\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const lazyImages = document.querySelectorAll('img.lazy')\n\n  if ('IntersectionObserver' in window) {\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => {\n        if (!entry.isIntersecting) return\n\n        const image = entry.target as HTMLImageElement\n        image.src = image.dataset.src as string\n        image.srcset = image.dataset.srcset || ''\n\n        image.onload = () => {\n          image.classList.remove('lazy')\n          image.onload = null\n        }\n        observer.unobserve(image)\n      })\n    })\n\n    lazyImages.forEach(image => observer.observe(image))\n  }\n})\n"]}